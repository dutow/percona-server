#
# Component Masking Functions: mask_pan
#
INSTALL COMPONENT 'file://component_masking_functions';
SELECT mask_pan("1234567890122461");
mask_pan("1234567890122461")
XXXXXXXXXXXX2461
SELECT mask_pan("123456789012246");
mask_pan("123456789012246")
XXXXXXXXXXX2246
SELECT mask_pan(NULL);
ERROR HY000: mask_pan<string> UDF failed; Wrong argument: must be between 14 and 19 characters
SELECT mask_pan("");
ERROR HY000: mask_pan<string> UDF failed; Wrong argument: must be between 14 and 19 characters
SELECT mask_pan("123496798465498779");
mask_pan("123496798465498779")
XXXXXXXXXXXXXX8779
SELECT mask_pan("this is not a pan");
mask_pan("this is not a pan")
XXXX XX XXX X pan
SELECT mask_pan("1234567890122461", "!");
mask_pan("1234567890122461", "!")
!!!!!!!!!!!!2461
# check charset of mask_pan()
SELECT mask_pan("1234567890122461", 'ű');
mask_pan("1234567890122461", 'ű')
űűűűűűűűűűűű2461
SELECT mask_pan(_latin2"1234567890122461", 'ű');
mask_pan(_latin2"1234567890122461", 'ű')
űűűűűűűűűűűű2461
SELECT CHARSET(mask_pan("1234567890122461", 'ű'));
CHARSET(mask_pan("1234567890122461", 'ű'))
utf8mb4
SELECT CHARSET(mask_pan(_latin2"1234567890122461", 'ű'));
CHARSET(mask_pan(_latin2"1234567890122461", 'ű'))
latin2
UNINSTALL COMPONENT 'file://component_masking_functions';
